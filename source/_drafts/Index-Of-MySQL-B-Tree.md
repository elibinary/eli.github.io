---
title: Index-Of-MySQL-B-Tree
tags:
- db
- MySQL
- Algorithm
description: 本文主要讨论树形结构与MySQL索引之间那些事。
---

#### 二叉查找树

二叉查找树的几个性质：
* 若任意节点的左子树不空，则左子树上所有结点的值均小于它的根结点的值；
* 任意节点的右子树不空，则右子树上所有结点的值均大于它的根结点的值；
* 任意节点的左、右子树也分别为二叉查找树。
* 没有键值相等的节点（no duplicate nodes）。
* 中序遍历就可以得到一个有序的序列

二叉查找树查找、插入的时间复杂度为 O(log n) 

*二叉查找树的具体查找，添加，删除操作这里就不展开了*

#### 二分查找
二分查找每次把搜索区域减少一半，时间复杂度为 O(log n)。

其优点是比较次数少，查找速度快，平均性能好；缺点是要求待查表为有序表，且插入删除困难。

大致的核心实现如下（当然你很容易将递归改为循环）：

```
int a[100];
int search(int left, int right, int value)
{
  int middle = left + ((right - left) >> 1);

  if (value < a[middle])
  {
    right = middle - 1;
    return search(left, right, value);
  }
  else if (value > a[middle])
  {
    left = middle + 1;
    return search(left, right, value);
  }
  
  return middle;
}
```

折半查找方法适用于不经常变动而查找频繁的有序列表。

#### B-Tree

与二叉查找树、平衡二叉查找树、红黑树等二叉树形结构相比，B-Tree 是一种多路查找树。不像前者每个节点最多可以有两个孩子节点，
B-Tree 可以有许多子女，而且B树也可以在O(logn)时间内，实现各种如插入，删除等集合操作。更大的分支因子可以降低树的高度从而降低
频繁磁盘I/O读写所造成的查询效率低下。许多数据库系统都会使用B树或者B树的各种变形结构。

B-Tree 又叫平衡多路查找树。 一棵m阶的B-Tree有如下性质：

* 树中每个结点最多含有m个孩子（m>=2）
* 除根结点和叶子结点外，其它每个结点至少有[ceil(m / 2)]个孩子（其中ceil(x)是一个取上限的函数）
* 根结点至少有2个孩子，根节点同时是叶子节点除外
* 所有叶子结点都出现在同一层
* 内部节点至少半满



B-Tree 的特点：

* 保持键值有序，以顺序遍历
* 使用层次化的索引来最小化磁盘读取
* 使用不完全填充的块来加速插入和删除
* 通过优雅的遍历算法来保持索引平衡
* 通过保证内部节点至少半满来最小化空间浪费
* 一棵B树可以处理任意数目的插入和删除


